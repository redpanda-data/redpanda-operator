- kind: Cluster
  description:
    Defines the observed status conditions of a cluster.
  types:
    - name: Ready
      description: >
        This condition indicates whether a cluster is ready to serve any
        traffic. This can happen, for example if a cluster is partially degraded
        but still can process requests.

        This condition defaults to "Unknown" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: Ready
        message: Cluster ready to service requests
        description: >
          This reason is used with the "Ready" condition when the condition is True.
      errors:
        - name: NotReady
          description: >
            This reason is used with the "Ready" condition when a cluster is not ready.
        - name: Error
          status:
            unknown: true
          description: >
            This reason is used with the "Ready" condition when an error that is retryable
            was encountered when attempting to determine readiness status. If this is set, then reconciliation
            should be retried.
        - name: TerminalError
          status:
            unknown: true
          description: >
            This reason is used with the "Ready" condition when an error that is irrecoverable
            was encountered when attempting to determine readiness status.
    - name: Healthy
      description: >
        This condition indicates whether a cluster is fully healthy.

        This condition defaults to "Unknown" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: Healthy
        message: Cluster is healthy
        description: >
          This reason is used with the "Healthy" condition when the condition is True.
      errors:
        - name: NotHealthy
          description: >
            This reason is used with the "Healthy" condition when a cluster is not healthy.
        - name: Error
          status:
            unknown: true
          description: >
            This reason is used with the "Healthy" condition when an error that is retryable
            was encountered when attempting to determine health status. If this is set, then reconciliation
            should be retried.
        - name: TerminalError
          status:
            unknown: true
          description: >
            This reason is used with the "Healthy" condition when an error that is irrecoverable
            was encountered when attempting to determine health status.
    - name: ClusterConfigurationApplied
      description: >
        This condition indicates whether cluster configuration parameters
        have currently been applied to a cluster for the given generation.

        This condition defaults to "False" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: Applied
        message: Cluster configuration successfully applied
        description: >
          This reason is used with the "ClusterConfigurationApplied" condition when the condition is True.
      errors:
        - name: StillReconciling
          description: >
            This reason is used with the "ClusterConfigurationApplied" condition when a cluster has only been
            partially reconciled and we have early returned prior to applying the desired cluster state. This
            happens when, for example, we're doing a cluster scaling operation.
        - name: Error
          description: >
            This reason is used with the "ClusterConfigurationApplied" condition when an error that is retryable
            was encountered when attempting to apply the cluster configuration. If this is set, then reconciliation
            should be retried.
        - name: TerminalError
          description: >
            This reason is used with the "ClusterConfigurationApplied" condition when an error that is irrecoverable
            was encountered when attempting to apply the cluster configuration and it cannot be applied.
    - name: LicenseValid
      description: >
        This condition indicates whether a valid license exists in the
        cluster.

        This condition defaults to "Unknown" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: LicenseValid
        message: Valid
        description: >
          This reason is used with the "LicenseValid" condition when the condition is True.
      errors:
        - name: LicenseExpired
          description: >
            This reason is used with the "LicenseValid" condition when a license is found within
            the cluster but it is expired.
        - name: LicenseNotPresent
          description: >
            This reason is used with the "LicenseValid" condition when a license is not found within
            the cluster.
        - name: Error
          status:
            unknown: true
          description: >
            This reason is used with the "LicenseValid" condition when an error that is retryable
            was encountered when attempting to fetch the license status. If this is set, then reconciliation
            should be retried.
        - name: TerminalError
          status:
            unknown: true
          description: >
            This reason is used with the "LicenseValid" condition when an error that is irrecoverable
            was encountered when attempting to fetch the license status.
    - name: Quiesced
      description: >
        This condition is used as to indicate that the cluster is no longer reconciling
        due to it being in a finalized state for the current generation.

        This condition defaults to "False" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: Quiesced
        message: Cluster reconciliation finished
        description: >
          This reason is used with the "Quiesced" condition when the condition is True.
      errors:
        - name: StillReconciling
          description: >
            This reason is used with the "Quiesced" condition when a cluster has only been
            partially reconciled and we have not fully completed reconciliation. This
            happens when, for example, we're doing a cluster scaling operation.
    - name: Stable
      description: >
        This condition is used as a roll-up status for any sort of automation such as
        terraform.

        This condition defaults to "False" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster.
      base:
        name: Stable
        message: Cluster Stable
        description: >
          This reason is used with the "Stable" condition when the condition is True.
      errors:
        - name: Unstable
          description: >
            This reason is used with the "Stable" condition when a cluster has not yet
            stabilized for automation purposes.

- kind: Resource
  description:
    Defines the observed status conditions of a cluster resource.
  types:
    - name: Synced
      description: >
        This condition indicates whether a cluster resource has been synced to
        its cluster.

        This condition defaults to "Unknown" with a reason of "NotReconciled"
        and must be set by a controller when it subsequently reconciles a
        cluster resource.
      base:
        name: Synced
        message: Cluster resource synced
        description: >
          This reason is used with the "Synced" condition when the condition is True.
      errors:
        - name: ClusterRefInvalid
          description: >
            This reason is used with the "Synced" condition when a clusterRef points to
            an unknown cluster.
        - name: ConfigurationInvalid
          description: >
            This reason is used with the "Synced" condition when a static configuration
            that points to a cluster is invalid.
        - name: Error
          description: >
            This reason is used with the "Synced" condition when an error that is retryable
            was encountered when attempting to sync a resource to its cluster. If this is set, then reconciliation
            should be retried.
        - name: TerminalError
          description: >
            This reason is used with the "Synced" condition when an error that is irrecoverable
            was encountered when attempting to sync a resource to its cluster.
