-- basic-test --
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external
    namespace: basic-test
  spec:
    externalTrafficPolicy: Local
    ports:
    - name: admin-default
      nodePort: 31644
      port: 9645
      protocol: TCP
      targetPort: 0
    - name: kafka-default
      nodePort: 31092
      port: 9094
      protocol: TCP
      targetPort: 0
    - name: http-default
      nodePort: 30082
      port: 8083
      protocol: TCP
      targetPort: 0
    - name: schema-default
      nodePort: 30081
      port: 8084
      protocol: TCP
      targetPort: 0
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: redpanda
    sessionAffinity: None
    type: NodePort
  status:
    loadBalancer: {}
- apiVersion: policy/v1
  kind: PodDisruptionBudget
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
  spec:
    maxUnavailable: 1
    selector:
      matchLabels:
        app.kubernetes.io/component: redpanda-statefulset
        app.kubernetes.io/instance: basic-test
        app.kubernetes.io/name: redpanda
        redpanda.com/poddisruptionbudget: basic-test
  status:
    currentHealthy: 0
    desiredHealthy: 0
    disruptionsAllowed: 0
    expectedPods: 0
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
      monitoring.redpanda.com/enabled: "false"
    name: basic-test
    namespace: basic-test
  spec:
    clusterIP: None
    ports:
    - name: admin
      port: 9644
      protocol: TCP
      targetPort: 9644
    - name: http
      port: 8082
      protocol: TCP
      targetPort: 8082
    - name: kafka
      port: 9093
      protocol: TCP
      targetPort: 9093
    - name: rpc
      port: 33145
      protocol: TCP
      targetPort: 33145
    - name: schemaregistry
      port: 8081
      protocol: TCP
      targetPort: 8081
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: redpanda
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  data:
    .bootstrap.json.in: '{"audit_enabled":"false","cloud_storage_cache_size":"5368709120","cloud_storage_enable_remote_read":"true","cloud_storage_enable_remote_write":"true","cloud_storage_enabled":"false","compacted_log_segment_size":"67108864","default_topic_replications":"3","enable_rack_awareness":"false","enable_sasl":"false","kafka_connection_rate_limit":"1000","kafka_enable_authorization":"false","log_segment_size_max":"268435456","log_segment_size_min":"16777216","max_compacted_log_segment_size":"536870912","storage_min_free_bytes":"1073741824"}'
    bootstrap.yaml.fixups: '[]'
    redpanda.yaml: |-
      config_file: /etc/redpanda/redpanda.yaml
      pandaproxy:
        pandaproxy_api:
        - address: 0.0.0.0
          name: internal
          port: 8082
        - address: 0.0.0.0
          name: default
          port: 8083
        pandaproxy_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      pandaproxy_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: basic-test-0.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-1.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-2.basic-test.basic-test.svc.cluster.local.
          port: 9093
      redpanda:
        admin:
        - address: 0.0.0.0
          name: internal
          port: 9644
        - address: 0.0.0.0
          name: default
          port: 9645
        admin_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        crash_loop_limit: 5
        empty_seed_starts_cluster: false
        kafka_api:
        - address: 0.0.0.0
          name: internal
          port: 9093
        - address: 0.0.0.0
          name: default
          port: 9094
        kafka_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        rpc_server:
          address: 0.0.0.0
          port: 33145
        rpc_server_tls:
          cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        seed_servers:
        - host:
            address: basic-test-0.basic-test.basic-test.svc.cluster.local.
            port: 33145
        - host:
            address: basic-test-1.basic-test.basic-test.svc.cluster.local.
            port: 33145
        - host:
            address: basic-test-2.basic-test.basic-test.svc.cluster.local.
            port: 33145
      rpk:
        additional_start_flags:
        - --default-log-level=info
        - --memory=2048M
        - --reserve-memory=205M
        - --smp=1
        admin_api:
          addresses:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:9644
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:9644
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:9644
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        enable_memory_locking: false
        kafka_api:
          brokers:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:9093
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:9093
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:9093
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        overprovisioned: false
        schema_registry:
          addresses:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:8081
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:8081
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:8081
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        tune_aio_events: true
      schema_registry:
        schema_registry_api:
        - address: 0.0.0.0
          name: internal
          port: 8081
        - address: 0.0.0.0
          name: default
          port: 8084
        schema_registry_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      schema_registry_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: basic-test-0.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-1.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-2.basic-test.basic-test.svc.cluster.local.
          port: 9093
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  data:
    profile: |-
      admin_api:
        addresses:
        - basic-test-0:31644
        - basic-test-1:31644
        - basic-test-2:31644
        tls:
          ca_file: ca.crt
      kafka_api:
        brokers:
        - basic-test-0:31092
        - basic-test-1:31092
        - basic-test-2:31092
        tls:
          ca_file: ca.crt
      name: default
      schema_registry:
        addresses:
        - basic-test-0:30081
        - basic-test-1:30081
        - basic-test-2:30081
        tls:
          ca_file: ca.crt
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-rpk
    namespace: basic-test
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-selfsigned-issuer
    namespace: basic-test
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-root-issuer
    namespace: basic-test
  spec:
    ca:
      secretName: basic-test-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-selfsigned-issuer
    namespace: basic-test
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-root-issuer
    namespace: basic-test
  spec:
    ca:
      secretName: basic-test-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-root-certificate
    namespace: basic-test
  spec:
    commonName: basic-test-default-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-default-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-root-certificate
    namespace: basic-test
  spec:
    commonName: basic-test-external-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-external-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-cert
    namespace: basic-test
  spec:
    dnsNames:
    - basic-test-cluster.basic-test.basic-test.svc.cluster.local
    - basic-test-cluster.basic-test.basic-test.svc
    - basic-test-cluster.basic-test.basic-test
    - '*.basic-test-cluster.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test-cluster.basic-test.basic-test.svc'
    - '*.basic-test-cluster.basic-test.basic-test'
    - basic-test.basic-test.svc.cluster.local
    - basic-test.basic-test.svc
    - basic-test.basic-test
    - '*.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test.basic-test.svc'
    - '*.basic-test.basic-test'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-default-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-default-cert
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-cert
    namespace: basic-test
  spec:
    dnsNames:
    - basic-test-cluster.basic-test.basic-test.svc.cluster.local
    - basic-test-cluster.basic-test.basic-test.svc
    - basic-test-cluster.basic-test.basic-test
    - '*.basic-test-cluster.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test-cluster.basic-test.basic-test.svc'
    - '*.basic-test-cluster.basic-test.basic-test'
    - basic-test.basic-test.svc.cluster.local
    - basic-test.basic-test.svc
    - basic-test.basic-test
    - '*.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test.basic-test.svc'
    - '*.basic-test.basic-test'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-external-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-external-cert
  status: {}
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-rpk-debug-bundle
    namespace: basic-test
  rules:
  - apiGroups:
    - ""
    resources:
    - configmaps
    - endpoints
    - events
    - limitranges
    - persistentvolumeclaims
    - pods
    - pods/log
    - replicationcontrollers
    - resourcequotas
    - serviceaccounts
    - services
    verbs:
    - get
    - list
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-sidecar
    namespace: basic-test
  rules:
  - apiGroups:
    - coordination.k8s.io
    resources:
    - leases
    verbs:
    - create
    - delete
    - get
    - list
    - patch
    - update
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-rpk-debug-bundle
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: basic-test-rpk-debug-bundle
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-sidecar
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: basic-test-sidecar
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-sts-lifecycle
    namespace: basic-test
  stringData:
    common.sh: |-
      #!/usr/bin/env bash

      # the SERVICE_NAME comes from the metadata.name of the pod, essentially the POD_NAME
      CURL_URL="https://${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local:9644"

      # commands used throughout
      CURL_NODE_ID_CMD="curl --silent --fail --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/node_config"

      CURL_MAINTENANCE_DELETE_CMD_PREFIX='curl -X DELETE --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_PUT_CMD_PREFIX='curl -X PUT --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_GET_CMD="curl -X GET --silent --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/maintenance"
    postStart.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      postStartHook () {
        set -x

        touch /tmp/postStartHookStarted

        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Clearing maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_DELETE_CMD="${CURL_MAINTENANCE_DELETE_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        # a 400 here would mean not in maintenance mode
        until [ "${status:-}" = '"200"' ] || [ "${status:-}" = '"400"' ]; do
            status=$(${CURL_MAINTENANCE_DELETE_CMD})
            sleep 0.5
        done

        touch /tmp/postStartHookFinished
      }

      postStartHook
      true
    preStop.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      touch /tmp/preStopHookStarted

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      set -x

      preStopHook () {
        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Setting maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_PUT_CMD="${CURL_MAINTENANCE_PUT_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        until [ "${status:-}" = '"200"' ]; do
            status=$(${CURL_MAINTENANCE_PUT_CMD})
            sleep 0.5
        done

        until [ "${finished:-}" = "true" ] || [ "${draining:-}" = "false" ]; do
            res=$(${CURL_MAINTENANCE_GET_CMD})
            finished=$(echo $res | grep -o '\"finished\":[^,}]*' | grep -o '[^: ]*$')
            draining=$(echo $res | grep -o '\"draining\":[^,}]*' | grep -o '[^: ]*$')
            sleep 0.5
        done

        touch /tmp/preStopHookFinished
      }
      preStopHook
      true
  type: Opaque
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-configurator
    namespace: basic-test
  stringData:
    configurator.sh: |-
      set -xe
      SERVICE_NAME=$1
      KUBERNETES_NODE_NAME=$2
      POD_ORDINAL=${SERVICE_NAME##*-}
      BROKER_INDEX=`expr $POD_ORDINAL + 1`

      CONFIG=/etc/redpanda/redpanda.yaml

      # Setup config files
      cp /tmp/base-config/redpanda.yaml "${CONFIG}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local.\",\"name\":\"internal\",\"port\":9093}"
      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[0] "$LISTENER"

      ADVERTISED_KAFKA_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[1] "${ADVERTISED_KAFKA_ADDRESSES[$POD_ORDINAL]}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local.\",\"name\":\"internal\",\"port\":8082}"
      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[0] "$LISTENER"

      ADVERTISED_HTTP_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[1] "${ADVERTISED_HTTP_ADDRESSES[$POD_ORDINAL]}"
  type: Opaque
- apiVersion: v1
  data:
    config.yaml: |
      # from .Values.console.config
      kafka:
        brokers:
        - basic-test-0.basic-test.basic-test.svc.cluster.local.:9093
        - basic-test-1.basic-test.basic-test.svc.cluster.local.:9093
        - basic-test-2.basic-test.basic-test.svc.cluster.local.:9093
        sasl:
          enabled: false
        schemaRegistry:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://basic-test-0.basic-test.basic-test.svc.cluster.local.:8081
          - https://basic-test-1.basic-test.basic-test.svc.cluster.local.:8081
          - https://basic-test-2.basic-test.basic-test.svc.cluster.local.:8081
        tls:
          caFilepath: /etc/tls/certs/default/ca.crt
          certFilepath: ""
          enabled: true
          insecureSkipTlsVerify: false
          keyFilepath: ""
      redpanda:
        adminApi:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://basic-test.basic-test.svc.cluster.local.:9644
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/instance: basic-test
        app.kubernetes.io/name: console
    strategy: {}
    template:
      metadata:
        annotations:
          checksum-redpanda-chart/config: 521217d2b7753580c8ef5da50a799bb4f1f123228eaa0b077105632a5685402c
          checksum/config: e07159484f05956236f7ca9b493b61cf44715cbd5df7c0c0a0e5f9c5391bfa42
        creationTimestamp: null
        labels:
          app.kubernetes.io/instance: basic-test
          app.kubernetes.io/name: console
      spec:
        affinity: {}
        automountServiceAccountToken: false
        containers:
        - args:
          - --config.filepath=/etc/console/configs/config.yaml
          image: docker.redpanda.com/redpandadata/console:v2.8.0
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: console
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            runAsNonRoot: true
          volumeMounts:
          - mountPath: /etc/console/configs
            name: configs
            readOnly: true
          - mountPath: /etc/tls/certs/default
            name: redpanda-default-cert
        securityContext:
          fsGroup: 99
          runAsUser: 99
        serviceAccountName: basic-test-console
        volumes:
        - configMap:
            name: basic-test-console
          name: configs
        - name: redpanda-default-cert
          secret:
            defaultMode: 272
            secretName: basic-test-default-cert
  status: {}
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
  spec:
    ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 0
    selector:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: console
    type: ClusterIP
  status:
    loadBalancer: {}
-- chown-datadir --
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-external
    namespace: chown-datadir
  spec:
    externalTrafficPolicy: Local
    ports:
    - name: admin-default
      nodePort: 31644
      port: 9645
      protocol: TCP
      targetPort: 0
    - name: kafka-default
      nodePort: 31092
      port: 9094
      protocol: TCP
      targetPort: 0
    - name: http-default
      nodePort: 30082
      port: 8083
      protocol: TCP
      targetPort: 0
    - name: schema-default
      nodePort: 30081
      port: 8084
      protocol: TCP
      targetPort: 0
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/name: redpanda
    sessionAffinity: None
    type: NodePort
  status:
    loadBalancer: {}
- apiVersion: policy/v1
  kind: PodDisruptionBudget
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir
    namespace: chown-datadir
  spec:
    maxUnavailable: 1
    selector:
      matchLabels:
        app.kubernetes.io/component: redpanda-statefulset
        app.kubernetes.io/instance: chown-datadir
        app.kubernetes.io/name: redpanda
        redpanda.com/poddisruptionbudget: chown-datadir
  status:
    currentHealthy: 0
    desiredHealthy: 0
    disruptionsAllowed: 0
    expectedPods: 0
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir
    namespace: chown-datadir
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
      monitoring.redpanda.com/enabled: "false"
    name: chown-datadir
    namespace: chown-datadir
  spec:
    clusterIP: None
    ports:
    - name: admin
      port: 9644
      protocol: TCP
      targetPort: 9644
    - name: http
      port: 8082
      protocol: TCP
      targetPort: 8082
    - name: kafka
      port: 9093
      protocol: TCP
      targetPort: 9093
    - name: rpc
      port: 33145
      protocol: TCP
      targetPort: 33145
    - name: schemaregistry
      port: 8081
      protocol: TCP
      targetPort: 8081
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/name: redpanda
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  data:
    .bootstrap.json.in: '{"audit_enabled":"false","cloud_storage_cache_size":"5368709120","cloud_storage_enable_remote_read":"true","cloud_storage_enable_remote_write":"true","cloud_storage_enabled":"false","compacted_log_segment_size":"67108864","default_topic_replications":"3","enable_rack_awareness":"false","enable_sasl":"false","kafka_connection_rate_limit":"1000","kafka_enable_authorization":"false","log_segment_size_max":"268435456","log_segment_size_min":"16777216","max_compacted_log_segment_size":"536870912","storage_min_free_bytes":"1073741824"}'
    bootstrap.yaml.fixups: '[]'
    redpanda.yaml: |-
      config_file: /etc/redpanda/redpanda.yaml
      pandaproxy:
        pandaproxy_api:
        - address: 0.0.0.0
          name: internal
          port: 8082
        - address: 0.0.0.0
          name: default
          port: 8083
        pandaproxy_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      pandaproxy_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
        - address: chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
        - address: chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
      redpanda:
        admin:
        - address: 0.0.0.0
          name: internal
          port: 9644
        - address: 0.0.0.0
          name: default
          port: 9645
        admin_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        crash_loop_limit: 5
        empty_seed_starts_cluster: false
        kafka_api:
        - address: 0.0.0.0
          name: internal
          port: 9093
        - address: 0.0.0.0
          name: default
          port: 9094
        kafka_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        rpc_server:
          address: 0.0.0.0
          port: 33145
        rpc_server_tls:
          cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        seed_servers:
        - host:
            address: chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.
            port: 33145
        - host:
            address: chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.
            port: 33145
        - host:
            address: chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.
            port: 33145
      rpk:
        additional_start_flags:
        - --default-log-level=info
        - --memory=2048M
        - --reserve-memory=205M
        - --smp=1
        admin_api:
          addresses:
          - chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.:9644
          - chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.:9644
          - chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.:9644
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        enable_memory_locking: false
        kafka_api:
          brokers:
          - chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.:9093
          - chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.:9093
          - chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.:9093
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        overprovisioned: false
        schema_registry:
          addresses:
          - chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.:8081
          - chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.:8081
          - chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.:8081
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        tune_aio_events: true
      schema_registry:
        schema_registry_api:
        - address: 0.0.0.0
          name: internal
          port: 8081
        - address: 0.0.0.0
          name: default
          port: 8084
        schema_registry_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      schema_registry_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
        - address: chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
        - address: chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.
          port: 9093
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir
    namespace: chown-datadir
- apiVersion: v1
  data:
    profile: |-
      admin_api:
        addresses:
        - chown-datadir-0:31644
        - chown-datadir-1:31644
        - chown-datadir-2:31644
        tls:
          ca_file: ca.crt
      kafka_api:
        brokers:
        - chown-datadir-0:31092
        - chown-datadir-1:31092
        - chown-datadir-2:31092
        tls:
          ca_file: ca.crt
      name: default
      schema_registry:
        addresses:
        - chown-datadir-0:30081
        - chown-datadir-1:30081
        - chown-datadir-2:30081
        tls:
          ca_file: ca.crt
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-rpk
    namespace: chown-datadir
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-default-selfsigned-issuer
    namespace: chown-datadir
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-default-root-issuer
    namespace: chown-datadir
  spec:
    ca:
      secretName: chown-datadir-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-external-selfsigned-issuer
    namespace: chown-datadir
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-external-root-issuer
    namespace: chown-datadir
  spec:
    ca:
      secretName: chown-datadir-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-default-root-certificate
    namespace: chown-datadir
  spec:
    commonName: chown-datadir-default-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: chown-datadir-default-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: chown-datadir-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-external-root-certificate
    namespace: chown-datadir
  spec:
    commonName: chown-datadir-external-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: chown-datadir-external-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: chown-datadir-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-default-cert
    namespace: chown-datadir
  spec:
    dnsNames:
    - chown-datadir-cluster.chown-datadir.chown-datadir.svc.cluster.local
    - chown-datadir-cluster.chown-datadir.chown-datadir.svc
    - chown-datadir-cluster.chown-datadir.chown-datadir
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir.svc.cluster.local'
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir.svc'
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir'
    - chown-datadir.chown-datadir.svc.cluster.local
    - chown-datadir.chown-datadir.svc
    - chown-datadir.chown-datadir
    - '*.chown-datadir.chown-datadir.svc.cluster.local'
    - '*.chown-datadir.chown-datadir.svc'
    - '*.chown-datadir.chown-datadir'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: chown-datadir-default-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: chown-datadir-default-cert
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-external-cert
    namespace: chown-datadir
  spec:
    dnsNames:
    - chown-datadir-cluster.chown-datadir.chown-datadir.svc.cluster.local
    - chown-datadir-cluster.chown-datadir.chown-datadir.svc
    - chown-datadir-cluster.chown-datadir.chown-datadir
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir.svc.cluster.local'
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir.svc'
    - '*.chown-datadir-cluster.chown-datadir.chown-datadir'
    - chown-datadir.chown-datadir.svc.cluster.local
    - chown-datadir.chown-datadir.svc
    - chown-datadir.chown-datadir
    - '*.chown-datadir.chown-datadir.svc.cluster.local'
    - '*.chown-datadir.chown-datadir.svc'
    - '*.chown-datadir.chown-datadir'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: chown-datadir-external-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: chown-datadir-external-cert
  status: {}
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-rpk-debug-bundle
    namespace: chown-datadir
  rules:
  - apiGroups:
    - ""
    resources:
    - configmaps
    - endpoints
    - events
    - limitranges
    - persistentvolumeclaims
    - pods
    - pods/log
    - replicationcontrollers
    - resourcequotas
    - serviceaccounts
    - services
    verbs:
    - get
    - list
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-sidecar
    namespace: chown-datadir
  rules:
  - apiGroups:
    - coordination.k8s.io
    resources:
    - leases
    verbs:
    - create
    - delete
    - get
    - list
    - patch
    - update
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-rpk-debug-bundle
    namespace: chown-datadir
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: chown-datadir-rpk-debug-bundle
  subjects:
  - kind: ServiceAccount
    name: chown-datadir
    namespace: chown-datadir
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-sidecar
    namespace: chown-datadir
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: chown-datadir-sidecar
  subjects:
  - kind: ServiceAccount
    name: chown-datadir
    namespace: chown-datadir
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-sts-lifecycle
    namespace: chown-datadir
  stringData:
    common.sh: |-
      #!/usr/bin/env bash

      # the SERVICE_NAME comes from the metadata.name of the pod, essentially the POD_NAME
      CURL_URL="https://${SERVICE_NAME}.chown-datadir.chown-datadir.svc.cluster.local:9644"

      # commands used throughout
      CURL_NODE_ID_CMD="curl --silent --fail --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/node_config"

      CURL_MAINTENANCE_DELETE_CMD_PREFIX='curl -X DELETE --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_PUT_CMD_PREFIX='curl -X PUT --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_GET_CMD="curl -X GET --silent --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/maintenance"
    postStart.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      postStartHook () {
        set -x

        touch /tmp/postStartHookStarted

        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Clearing maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_DELETE_CMD="${CURL_MAINTENANCE_DELETE_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        # a 400 here would mean not in maintenance mode
        until [ "${status:-}" = '"200"' ] || [ "${status:-}" = '"400"' ]; do
            status=$(${CURL_MAINTENANCE_DELETE_CMD})
            sleep 0.5
        done

        touch /tmp/postStartHookFinished
      }

      postStartHook
      true
    preStop.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      touch /tmp/preStopHookStarted

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      set -x

      preStopHook () {
        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Setting maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_PUT_CMD="${CURL_MAINTENANCE_PUT_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        until [ "${status:-}" = '"200"' ]; do
            status=$(${CURL_MAINTENANCE_PUT_CMD})
            sleep 0.5
        done

        until [ "${finished:-}" = "true" ] || [ "${draining:-}" = "false" ]; do
            res=$(${CURL_MAINTENANCE_GET_CMD})
            finished=$(echo $res | grep -o '\"finished\":[^,}]*' | grep -o '[^: ]*$')
            draining=$(echo $res | grep -o '\"draining\":[^,}]*' | grep -o '[^: ]*$')
            sleep 0.5
        done

        touch /tmp/preStopHookFinished
      }
      preStopHook
      true
  type: Opaque
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-configurator
    namespace: chown-datadir
  stringData:
    configurator.sh: |-
      set -xe
      SERVICE_NAME=$1
      KUBERNETES_NODE_NAME=$2
      POD_ORDINAL=${SERVICE_NAME##*-}
      BROKER_INDEX=`expr $POD_ORDINAL + 1`

      CONFIG=/etc/redpanda/redpanda.yaml

      # Setup config files
      cp /tmp/base-config/redpanda.yaml "${CONFIG}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.chown-datadir.chown-datadir.svc.cluster.local.\",\"name\":\"internal\",\"port\":9093}"
      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[0] "$LISTENER"

      ADVERTISED_KAFKA_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[1] "${ADVERTISED_KAFKA_ADDRESSES[$POD_ORDINAL]}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.chown-datadir.chown-datadir.svc.cluster.local.\",\"name\":\"internal\",\"port\":8082}"
      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[0] "$LISTENER"

      ADVERTISED_HTTP_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[1] "${ADVERTISED_HTTP_ADDRESSES[$POD_ORDINAL]}"
  type: Opaque
- apiVersion: v1
  data:
    config.yaml: |
      # from .Values.console.config
      kafka:
        brokers:
        - chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.:9093
        - chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.:9093
        - chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.:9093
        sasl:
          enabled: false
        schemaRegistry:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://chown-datadir-0.chown-datadir.chown-datadir.svc.cluster.local.:8081
          - https://chown-datadir-1.chown-datadir.chown-datadir.svc.cluster.local.:8081
          - https://chown-datadir-2.chown-datadir.chown-datadir.svc.cluster.local.:8081
        tls:
          caFilepath: /etc/tls/certs/default/ca.crt
          certFilepath: ""
          enabled: true
          insecureSkipTlsVerify: false
          keyFilepath: ""
      redpanda:
        adminApi:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://chown-datadir.chown-datadir.svc.cluster.local.:9644
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-console
    namespace: chown-datadir
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-console
    namespace: chown-datadir
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/instance: chown-datadir
        app.kubernetes.io/name: console
    strategy: {}
    template:
      metadata:
        annotations:
          checksum-redpanda-chart/config: 6ebf49f3ef56e0306722fbdb2c2fcd455b17f1bf89ae6d85d0cedcaf64f89e6c
          checksum/config: 4e5f7d808b9f6bf7323f22007d1a2a891597deec3eb09a83e674a1d48fd50d20
        creationTimestamp: null
        labels:
          app.kubernetes.io/instance: chown-datadir
          app.kubernetes.io/name: console
      spec:
        affinity: {}
        automountServiceAccountToken: false
        containers:
        - args:
          - --config.filepath=/etc/console/configs/config.yaml
          image: docker.redpanda.com/redpandadata/console:v2.8.0
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: console
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            runAsNonRoot: true
          volumeMounts:
          - mountPath: /etc/console/configs
            name: configs
            readOnly: true
          - mountPath: /etc/tls/certs/default
            name: redpanda-default-cert
        securityContext:
          fsGroup: 99
          runAsUser: 99
        serviceAccountName: chown-datadir-console
        volumes:
        - configMap:
            name: chown-datadir-console
          name: configs
        - name: redpanda-default-cert
          secret:
            defaultMode: 272
            secretName: chown-datadir-default-cert
  status: {}
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-console
    namespace: chown-datadir
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: chown-datadir
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: chown-datadir
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: chown-datadir
      helm.toolkit.fluxcd.io/namespace: chown-datadir
    name: chown-datadir-console
    namespace: chown-datadir
  spec:
    ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 0
    selector:
      app.kubernetes.io/instance: chown-datadir
      app.kubernetes.io/name: console
    type: ClusterIP
  status:
    loadBalancer: {}
-- rack-awareness --
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-external
    namespace: rack-awareness
  spec:
    externalTrafficPolicy: Local
    ports:
    - name: admin-default
      nodePort: 31644
      port: 9645
      protocol: TCP
      targetPort: 0
    - name: kafka-default
      nodePort: 31092
      port: 9094
      protocol: TCP
      targetPort: 0
    - name: http-default
      nodePort: 30082
      port: 8083
      protocol: TCP
      targetPort: 0
    - name: schema-default
      nodePort: 30081
      port: 8084
      protocol: TCP
      targetPort: 0
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/name: redpanda
    sessionAffinity: None
    type: NodePort
  status:
    loadBalancer: {}
- apiVersion: policy/v1
  kind: PodDisruptionBudget
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness
    namespace: rack-awareness
  spec:
    maxUnavailable: 1
    selector:
      matchLabels:
        app.kubernetes.io/component: redpanda-statefulset
        app.kubernetes.io/instance: rack-awareness
        app.kubernetes.io/name: redpanda
        redpanda.com/poddisruptionbudget: rack-awareness
  status:
    currentHealthy: 0
    desiredHealthy: 0
    disruptionsAllowed: 0
    expectedPods: 0
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness
    namespace: rack-awareness
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
      monitoring.redpanda.com/enabled: "false"
    name: rack-awareness
    namespace: rack-awareness
  spec:
    clusterIP: None
    ports:
    - name: admin
      port: 9644
      protocol: TCP
      targetPort: 9644
    - name: http
      port: 8082
      protocol: TCP
      targetPort: 8082
    - name: kafka
      port: 9093
      protocol: TCP
      targetPort: 9093
    - name: rpc
      port: 33145
      protocol: TCP
      targetPort: 33145
    - name: schemaregistry
      port: 8081
      protocol: TCP
      targetPort: 8081
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/name: redpanda
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  data:
    .bootstrap.json.in: '{"audit_enabled":"false","cloud_storage_cache_size":"5368709120","cloud_storage_enable_remote_read":"true","cloud_storage_enable_remote_write":"true","cloud_storage_enabled":"false","compacted_log_segment_size":"67108864","default_topic_replications":"3","enable_rack_awareness":"true","enable_sasl":"false","kafka_connection_rate_limit":"1000","kafka_enable_authorization":"false","log_segment_size_max":"268435456","log_segment_size_min":"16777216","max_compacted_log_segment_size":"536870912","storage_min_free_bytes":"1073741824"}'
    bootstrap.yaml.fixups: '[]'
    redpanda.yaml: |-
      config_file: /etc/redpanda/redpanda.yaml
      pandaproxy:
        pandaproxy_api:
        - address: 0.0.0.0
          name: internal
          port: 8082
        - address: 0.0.0.0
          name: default
          port: 8083
        pandaproxy_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      pandaproxy_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
        - address: rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
        - address: rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
      redpanda:
        admin:
        - address: 0.0.0.0
          name: internal
          port: 9644
        - address: 0.0.0.0
          name: default
          port: 9645
        admin_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        crash_loop_limit: 5
        empty_seed_starts_cluster: false
        kafka_api:
        - address: 0.0.0.0
          name: internal
          port: 9093
        - address: 0.0.0.0
          name: default
          port: 9094
        kafka_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        rpc_server:
          address: 0.0.0.0
          port: 33145
        rpc_server_tls:
          cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        seed_servers:
        - host:
            address: rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.
            port: 33145
        - host:
            address: rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.
            port: 33145
        - host:
            address: rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.
            port: 33145
      rpk:
        additional_start_flags:
        - --default-log-level=info
        - --memory=2048M
        - --reserve-memory=205M
        - --smp=1
        admin_api:
          addresses:
          - rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.:9644
          - rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.:9644
          - rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.:9644
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        enable_memory_locking: false
        kafka_api:
          brokers:
          - rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.:9093
          - rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.:9093
          - rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.:9093
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        overprovisioned: false
        schema_registry:
          addresses:
          - rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.:8081
          - rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.:8081
          - rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.:8081
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        tune_aio_events: true
      schema_registry:
        schema_registry_api:
        - address: 0.0.0.0
          name: internal
          port: 8081
        - address: 0.0.0.0
          name: default
          port: 8084
        schema_registry_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      schema_registry_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
        - address: rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
        - address: rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.
          port: 9093
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness
    namespace: rack-awareness
- apiVersion: v1
  data:
    profile: |-
      admin_api:
        addresses:
        - rack-awareness-0:31644
        - rack-awareness-1:31644
        - rack-awareness-2:31644
        tls:
          ca_file: ca.crt
      kafka_api:
        brokers:
        - rack-awareness-0:31092
        - rack-awareness-1:31092
        - rack-awareness-2:31092
        tls:
          ca_file: ca.crt
      name: default
      schema_registry:
        addresses:
        - rack-awareness-0:30081
        - rack-awareness-1:30081
        - rack-awareness-2:30081
        tls:
          ca_file: ca.crt
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-rpk
    namespace: rack-awareness
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-default-selfsigned-issuer
    namespace: rack-awareness
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-default-root-issuer
    namespace: rack-awareness
  spec:
    ca:
      secretName: rack-awareness-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-external-selfsigned-issuer
    namespace: rack-awareness
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-external-root-issuer
    namespace: rack-awareness
  spec:
    ca:
      secretName: rack-awareness-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-default-root-certificate
    namespace: rack-awareness
  spec:
    commonName: rack-awareness-default-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: rack-awareness-default-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: rack-awareness-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-external-root-certificate
    namespace: rack-awareness
  spec:
    commonName: rack-awareness-external-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: rack-awareness-external-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: rack-awareness-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-default-cert
    namespace: rack-awareness
  spec:
    dnsNames:
    - rack-awareness-cluster.rack-awareness.rack-awareness.svc.cluster.local
    - rack-awareness-cluster.rack-awareness.rack-awareness.svc
    - rack-awareness-cluster.rack-awareness.rack-awareness
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness.svc.cluster.local'
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness.svc'
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness'
    - rack-awareness.rack-awareness.svc.cluster.local
    - rack-awareness.rack-awareness.svc
    - rack-awareness.rack-awareness
    - '*.rack-awareness.rack-awareness.svc.cluster.local'
    - '*.rack-awareness.rack-awareness.svc'
    - '*.rack-awareness.rack-awareness'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: rack-awareness-default-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: rack-awareness-default-cert
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-external-cert
    namespace: rack-awareness
  spec:
    dnsNames:
    - rack-awareness-cluster.rack-awareness.rack-awareness.svc.cluster.local
    - rack-awareness-cluster.rack-awareness.rack-awareness.svc
    - rack-awareness-cluster.rack-awareness.rack-awareness
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness.svc.cluster.local'
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness.svc'
    - '*.rack-awareness-cluster.rack-awareness.rack-awareness'
    - rack-awareness.rack-awareness.svc.cluster.local
    - rack-awareness.rack-awareness.svc
    - rack-awareness.rack-awareness
    - '*.rack-awareness.rack-awareness.svc.cluster.local'
    - '*.rack-awareness.rack-awareness.svc'
    - '*.rack-awareness.rack-awareness'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: rack-awareness-external-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: rack-awareness-external-cert
  status: {}
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-rpk-debug-bundle
    namespace: rack-awareness
  rules:
  - apiGroups:
    - ""
    resources:
    - configmaps
    - endpoints
    - events
    - limitranges
    - persistentvolumeclaims
    - pods
    - pods/log
    - replicationcontrollers
    - resourcequotas
    - serviceaccounts
    - services
    verbs:
    - get
    - list
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-sidecar
    namespace: rack-awareness
  rules:
  - apiGroups:
    - coordination.k8s.io
    resources:
    - leases
    verbs:
    - create
    - delete
    - get
    - list
    - patch
    - update
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-rack-awareness-rack-awareness
  rules:
  - apiGroups:
    - ""
    resources:
    - nodes
    verbs:
    - get
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-rpk-debug-bundle
    namespace: rack-awareness
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: rack-awareness-rpk-debug-bundle
  subjects:
  - kind: ServiceAccount
    name: rack-awareness
    namespace: rack-awareness
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-sidecar
    namespace: rack-awareness
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: rack-awareness-sidecar
  subjects:
  - kind: ServiceAccount
    name: rack-awareness
    namespace: rack-awareness
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-rack-awareness-rack-awareness
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: rack-awareness-rack-awareness-rack-awareness
  subjects:
  - kind: ServiceAccount
    name: rack-awareness
    namespace: rack-awareness
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-sts-lifecycle
    namespace: rack-awareness
  stringData:
    common.sh: |-
      #!/usr/bin/env bash

      # the SERVICE_NAME comes from the metadata.name of the pod, essentially the POD_NAME
      CURL_URL="https://${SERVICE_NAME}.rack-awareness.rack-awareness.svc.cluster.local:9644"

      # commands used throughout
      CURL_NODE_ID_CMD="curl --silent --fail --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/node_config"

      CURL_MAINTENANCE_DELETE_CMD_PREFIX='curl -X DELETE --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_PUT_CMD_PREFIX='curl -X PUT --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_GET_CMD="curl -X GET --silent --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/maintenance"
    postStart.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      postStartHook () {
        set -x

        touch /tmp/postStartHookStarted

        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Clearing maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_DELETE_CMD="${CURL_MAINTENANCE_DELETE_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        # a 400 here would mean not in maintenance mode
        until [ "${status:-}" = '"200"' ] || [ "${status:-}" = '"400"' ]; do
            status=$(${CURL_MAINTENANCE_DELETE_CMD})
            sleep 0.5
        done

        touch /tmp/postStartHookFinished
      }

      postStartHook
      true
    preStop.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      touch /tmp/preStopHookStarted

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      set -x

      preStopHook () {
        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Setting maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_PUT_CMD="${CURL_MAINTENANCE_PUT_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        until [ "${status:-}" = '"200"' ]; do
            status=$(${CURL_MAINTENANCE_PUT_CMD})
            sleep 0.5
        done

        until [ "${finished:-}" = "true" ] || [ "${draining:-}" = "false" ]; do
            res=$(${CURL_MAINTENANCE_GET_CMD})
            finished=$(echo $res | grep -o '\"finished\":[^,}]*' | grep -o '[^: ]*$')
            draining=$(echo $res | grep -o '\"draining\":[^,}]*' | grep -o '[^: ]*$')
            sleep 0.5
        done

        touch /tmp/preStopHookFinished
      }
      preStopHook
      true
  type: Opaque
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: redpanda-5.10.4
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-configurator
    namespace: rack-awareness
  stringData:
    configurator.sh: |-
      set -xe
      SERVICE_NAME=$1
      KUBERNETES_NODE_NAME=$2
      POD_ORDINAL=${SERVICE_NAME##*-}
      BROKER_INDEX=`expr $POD_ORDINAL + 1`

      CONFIG=/etc/redpanda/redpanda.yaml

      # Setup config files
      cp /tmp/base-config/redpanda.yaml "${CONFIG}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.rack-awareness.rack-awareness.svc.cluster.local.\",\"name\":\"internal\",\"port\":9093}"
      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[0] "$LISTENER"

      ADVERTISED_KAFKA_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[1] "${ADVERTISED_KAFKA_ADDRESSES[$POD_ORDINAL]}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.rack-awareness.rack-awareness.svc.cluster.local.\",\"name\":\"internal\",\"port\":8082}"
      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[0] "$LISTENER"

      ADVERTISED_HTTP_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[1] "${ADVERTISED_HTTP_ADDRESSES[$POD_ORDINAL]}"

      # Configure Rack Awareness
      set +x
      RACK=$(curl --silent --cacert /run/secrets/kubernetes.io/serviceaccount/ca.crt --fail -H 'Authorization: Bearer '$(cat /run/secrets/kubernetes.io/serviceaccount/token) "https://${KUBERNETES_SERVICE_HOST}:${KUBERNETES_SERVICE_PORT_HTTPS}/api/v1/nodes/${KUBERNETES_NODE_NAME}?pretty=true" | grep '"kubernetes.io/os"' | grep -v '\"key\":' | sed 's/.*": "\([^"]\+\).*/\1/')
      set -x
      rpk --config "$CONFIG" redpanda config set redpanda.rack "${RACK}"
  type: Opaque
- apiVersion: v1
  data:
    config.yaml: |
      # from .Values.console.config
      kafka:
        brokers:
        - rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.:9093
        - rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.:9093
        - rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.:9093
        sasl:
          enabled: false
        schemaRegistry:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://rack-awareness-0.rack-awareness.rack-awareness.svc.cluster.local.:8081
          - https://rack-awareness-1.rack-awareness.rack-awareness.svc.cluster.local.:8081
          - https://rack-awareness-2.rack-awareness.rack-awareness.svc.cluster.local.:8081
        tls:
          caFilepath: /etc/tls/certs/default/ca.crt
          certFilepath: ""
          enabled: true
          insecureSkipTlsVerify: false
          keyFilepath: ""
      redpanda:
        adminApi:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://rack-awareness.rack-awareness.svc.cluster.local.:9644
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-console
    namespace: rack-awareness
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-console
    namespace: rack-awareness
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/instance: rack-awareness
        app.kubernetes.io/name: console
    strategy: {}
    template:
      metadata:
        annotations:
          checksum-redpanda-chart/config: 0d2fee8fc52d84f752cbe78a81c519531ed9227e33cd7ad8144f57250a121940
          checksum/config: 64f3b5984ecaf99055c6b45a56baef56a9f7889a06431d63526f92f8ad0192bc
        creationTimestamp: null
        labels:
          app.kubernetes.io/instance: rack-awareness
          app.kubernetes.io/name: console
      spec:
        affinity: {}
        automountServiceAccountToken: false
        containers:
        - args:
          - --config.filepath=/etc/console/configs/config.yaml
          image: docker.redpanda.com/redpandadata/console:v2.8.0
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: console
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            runAsNonRoot: true
          volumeMounts:
          - mountPath: /etc/console/configs
            name: configs
            readOnly: true
          - mountPath: /etc/tls/certs/default
            name: redpanda-default-cert
        securityContext:
          fsGroup: 99
          runAsUser: 99
        serviceAccountName: rack-awareness-console
        volumes:
        - configMap:
            name: rack-awareness-console
          name: configs
        - name: redpanda-default-cert
          secret:
            defaultMode: 272
            secretName: rack-awareness-default-cert
  status: {}
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-console
    namespace: rack-awareness
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v2.8.0
      cluster.redpanda.com/namespace: rack-awareness
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: rack-awareness
      helm.sh/chart: console-0.7.31
      helm.toolkit.fluxcd.io/name: rack-awareness
      helm.toolkit.fluxcd.io/namespace: rack-awareness
    name: rack-awareness-console
    namespace: rack-awareness
  spec:
    ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 0
    selector:
      app.kubernetes.io/instance: rack-awareness
      app.kubernetes.io/name: console
    type: ClusterIP
  status:
    loadBalancer: {}
