-- basic-test --
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external
    namespace: basic-test
  spec:
    externalTrafficPolicy: Local
    ports:
    - name: admin-default
      nodePort: 31644
      port: 9645
      protocol: TCP
      targetPort: 0
    - name: kafka-default
      nodePort: 31092
      port: 9094
      protocol: TCP
      targetPort: 0
    - name: http-default
      nodePort: 30082
      port: 8083
      protocol: TCP
      targetPort: 0
    - name: schema-default
      nodePort: 30081
      port: 8084
      protocol: TCP
      targetPort: 0
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: redpanda
    sessionAffinity: None
    type: NodePort
  status:
    loadBalancer: {}
- apiVersion: policy/v1
  kind: PodDisruptionBudget
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
  spec:
    maxUnavailable: 1
    selector:
      matchLabels:
        app.kubernetes.io/component: redpanda-statefulset
        app.kubernetes.io/instance: basic-test
        app.kubernetes.io/name: redpanda
        redpanda.com/poddisruptionbudget: basic-test
  status:
    currentHealthy: 0
    desiredHealthy: 0
    disruptionsAllowed: 0
    expectedPods: 0
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
      monitoring.redpanda.com/enabled: "false"
    name: basic-test
    namespace: basic-test
  spec:
    clusterIP: None
    ports:
    - name: admin
      port: 9644
      protocol: TCP
      targetPort: 9644
    - name: http
      port: 8082
      protocol: TCP
      targetPort: 8082
    - name: kafka
      port: 9093
      protocol: TCP
      targetPort: 9093
    - name: rpc
      port: 33145
      protocol: TCP
      targetPort: 33145
    - name: schemaregistry
      port: 8081
      protocol: TCP
      targetPort: 8081
    publishNotReadyAddresses: true
    selector:
      app.kubernetes.io/component: redpanda-statefulset
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: redpanda
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: batch/v1
  kind: Job
  metadata:
    annotations:
      helm.sh/hook: post-install,post-upgrade
      helm.sh/hook-delete-policy: before-hook-creation
      helm.sh/hook-weight: "-5"
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-configuration
    namespace: basic-test
  spec:
    template:
      metadata:
        creationTimestamp: null
        generateName: basic-test-post-
        labels:
          app.kubernetes.io/component: redpanda-post-install
          app.kubernetes.io/instance: basic-test
          app.kubernetes.io/name: redpanda
      spec:
        automountServiceAccountToken: false
        containers:
        - command:
          - /redpanda-operator
          - sync-cluster-config
          - --users-directory
          - /etc/secrets/users
          - --redpanda-yaml
          - /tmp/base-config/redpanda.yaml
          - --bootstrap-yaml
          - /tmp/config/.bootstrap.yaml
          image: docker.redpanda.com/redpandadata/redpanda-operator:v25.1.1-beta2
          name: post-install
          resources: {}
          securityContext: {}
          volumeMounts:
          - mountPath: /etc/tls/certs/default
            name: redpanda-default-cert
          - mountPath: /etc/tls/certs/external
            name: redpanda-external-cert
          - mountPath: /tmp/config
            name: config
          - mountPath: /tmp/base-config
            name: base-config
        initContainers:
        - command:
          - /redpanda-operator
          - envsubst
          - /tmp/base-config/bootstrap.yaml
          - --output
          - /tmp/config/.bootstrap.yaml
          image: docker.redpanda.com/redpandadata/redpanda-operator:v25.1.1-beta2
          name: bootstrap-yaml-envsubst
          resources:
            limits:
              cpu: 100m
              memory: 125Mi
            requests:
              cpu: 100m
              memory: 125Mi
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          volumeMounts:
          - mountPath: /tmp/config/
            name: config
          - mountPath: /tmp/base-config/
            name: base-config
        restartPolicy: Never
        securityContext:
          fsGroup: 101
          fsGroupChangePolicy: OnRootMismatch
          runAsUser: 101
        serviceAccountName: basic-test
        volumes:
        - name: redpanda-default-cert
          secret:
            defaultMode: 288
            secretName: basic-test-default-cert
        - name: redpanda-external-cert
          secret:
            defaultMode: 288
            secretName: basic-test-external-cert
        - configMap:
            name: basic-test
          name: base-config
        - emptyDir: {}
          name: config
  status: {}
- apiVersion: v1
  data:
    bootstrap.yaml: |-
      audit_enabled: false
      cloud_storage_cache_size: 5368709120
      cloud_storage_enable_remote_read: true
      cloud_storage_enable_remote_write: true
      cloud_storage_enabled: false
      compacted_log_segment_size: 67108864
      default_topic_replications: 3
      enable_rack_awareness: false
      enable_sasl: false
      kafka_connection_rate_limit: 1000
      kafka_enable_authorization: false
      log_segment_size_max: 268435456
      log_segment_size_min: 16777216
      max_compacted_log_segment_size: 536870912
      storage_min_free_bytes: 1073741824
    redpanda.yaml: |-
      config_file: /etc/redpanda/redpanda.yaml
      pandaproxy:
        pandaproxy_api:
        - address: 0.0.0.0
          name: internal
          port: 8082
        - address: 0.0.0.0
          name: default
          port: 8083
        pandaproxy_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      pandaproxy_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: basic-test-0.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-1.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-2.basic-test.basic-test.svc.cluster.local.
          port: 9093
      redpanda:
        admin:
        - address: 0.0.0.0
          name: internal
          port: 9644
        - address: 0.0.0.0
          name: default
          port: 9645
        admin_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        crash_loop_limit: 5
        empty_seed_starts_cluster: false
        kafka_api:
        - address: 0.0.0.0
          name: internal
          port: 9093
        - address: 0.0.0.0
          name: default
          port: 9094
        kafka_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
        rpc_server:
          address: 0.0.0.0
          port: 33145
        rpc_server_tls:
          cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        seed_servers:
        - host:
            address: basic-test-0.basic-test.basic-test.svc.cluster.local.
            port: 33145
        - host:
            address: basic-test-1.basic-test.basic-test.svc.cluster.local.
            port: 33145
        - host:
            address: basic-test-2.basic-test.basic-test.svc.cluster.local.
            port: 33145
      rpk:
        additional_start_flags:
        - --default-log-level=info
        - --memory=2048M
        - --reserve-memory=205M
        - --smp=1
        admin_api:
          addresses:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:9644
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:9644
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:9644
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        enable_memory_locking: false
        kafka_api:
          brokers:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:9093
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:9093
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:9093
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        overprovisioned: false
        schema_registry:
          addresses:
          - basic-test-0.basic-test.basic-test.svc.cluster.local.:8081
          - basic-test-1.basic-test.basic-test.svc.cluster.local.:8081
          - basic-test-2.basic-test.basic-test.svc.cluster.local.:8081
          tls:
            ca_file: /etc/tls/certs/default/ca.crt
        tune_aio_events: true
      schema_registry:
        schema_registry_api:
        - address: 0.0.0.0
          name: internal
          port: 8081
        - address: 0.0.0.0
          name: default
          port: 8084
        schema_registry_api_tls:
        - cert_file: /etc/tls/certs/default/tls.crt
          enabled: true
          key_file: /etc/tls/certs/default/tls.key
          name: internal
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        - cert_file: /etc/tls/certs/external/tls.crt
          enabled: true
          key_file: /etc/tls/certs/external/tls.key
          name: default
          require_client_auth: false
          truststore_file: /etc/tls/certs/external/ca.crt
      schema_registry_client:
        broker_tls:
          enabled: true
          require_client_auth: false
          truststore_file: /etc/tls/certs/default/ca.crt
        brokers:
        - address: basic-test-0.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-1.basic-test.basic-test.svc.cluster.local.
          port: 9093
        - address: basic-test-2.basic-test.basic-test.svc.cluster.local.
          port: 9093
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  data:
    profile: |-
      admin_api:
        addresses:
        - basic-test-0:31644
        - basic-test-1:31644
        - basic-test-2:31644
        tls:
          ca_file: ca.crt
      kafka_api:
        brokers:
        - basic-test-0:31092
        - basic-test-1:31092
        - basic-test-2:31092
        tls:
          ca_file: ca.crt
      name: default
      schema_registry:
        addresses:
        - basic-test-0:30081
        - basic-test-1:30081
        - basic-test-2:30081
        tls:
          ca_file: ca.crt
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-rpk
    namespace: basic-test
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-selfsigned-issuer
    namespace: basic-test
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-root-issuer
    namespace: basic-test
  spec:
    ca:
      secretName: basic-test-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-selfsigned-issuer
    namespace: basic-test
  spec:
    selfSigned: {}
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Issuer
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-root-issuer
    namespace: basic-test
  spec:
    ca:
      secretName: basic-test-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-root-certificate
    namespace: basic-test
  spec:
    commonName: basic-test-default-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-default-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-default-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-root-certificate
    namespace: basic-test
  spec:
    commonName: basic-test-external-root-certificate
    duration: 43800h0m0s
    isCA: true
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-external-selfsigned-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-external-root-certificate
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-default-cert
    namespace: basic-test
  spec:
    dnsNames:
    - basic-test-cluster.basic-test.basic-test.svc.cluster.local
    - basic-test-cluster.basic-test.basic-test.svc
    - basic-test-cluster.basic-test.basic-test
    - '*.basic-test-cluster.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test-cluster.basic-test.basic-test.svc'
    - '*.basic-test-cluster.basic-test.basic-test'
    - basic-test.basic-test.svc.cluster.local
    - basic-test.basic-test.svc
    - basic-test.basic-test
    - '*.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test.basic-test.svc'
    - '*.basic-test.basic-test'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-default-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-default-cert
  status: {}
- apiVersion: cert-manager.io/v1
  kind: Certificate
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-external-cert
    namespace: basic-test
  spec:
    dnsNames:
    - basic-test-cluster.basic-test.basic-test.svc.cluster.local
    - basic-test-cluster.basic-test.basic-test.svc
    - basic-test-cluster.basic-test.basic-test
    - '*.basic-test-cluster.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test-cluster.basic-test.basic-test.svc'
    - '*.basic-test-cluster.basic-test.basic-test'
    - basic-test.basic-test.svc.cluster.local
    - basic-test.basic-test.svc
    - basic-test.basic-test
    - '*.basic-test.basic-test.svc.cluster.local'
    - '*.basic-test.basic-test.svc'
    - '*.basic-test.basic-test'
    duration: 43800h0m0s
    issuerRef:
      group: cert-manager.io
      kind: Issuer
      name: basic-test-external-root-issuer
    privateKey:
      algorithm: ECDSA
      size: 256
    secretName: basic-test-external-cert
  status: {}
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-decommission
    namespace: basic-test
  rules:
  - apiGroups:
    - ""
    resources:
    - events
    verbs:
    - create
    - patch
  - apiGroups:
    - ""
    resources:
    - persistentvolumeclaims
    verbs:
    - delete
    - get
    - list
    - watch
  - apiGroups:
    - ""
    resources:
    - pods
    - secrets
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - apps
    resources:
    - statefulsets
    verbs:
    - get
    - list
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-pvcunbinder
    namespace: basic-test
  rules:
  - apiGroups:
    - ""
    resources:
    - persistentvolumeclaims
    - pods
    verbs:
    - delete
    - get
    - list
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-rpk-debug-bundle
    namespace: basic-test
  rules:
  - apiGroups:
    - ""
    resources:
    - configmaps
    - endpoints
    - events
    - limitranges
    - persistentvolumeclaims
    - pods
    - pods/log
    - replicationcontrollers
    - resourcequotas
    - serviceaccounts
    - services
    verbs:
    - get
    - list
- apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-sidecar
    namespace: basic-test
  rules:
  - apiGroups:
    - coordination.k8s.io
    resources:
    - leases
    verbs:
    - create
    - delete
    - get
    - list
    - patch
    - update
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-decommission
  rules:
  - apiGroups:
    - ""
    resources:
    - persistentvolumes
    verbs:
    - patch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRole
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-pvcunbinder
  rules:
  - apiGroups:
    - ""
    resources:
    - persistentvolumes
    verbs:
    - get
    - list
    - patch
    - watch
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-decommission
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: redpanda-decommission
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-pvcunbinder
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: redpanda-pvcunbinder
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-rpk-debug-bundle
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: redpanda-rpk-debug-bundle
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: redpanda-sidecar
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: Role
    name: redpanda-sidecar
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-decommission
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: basic-test-decommission
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: rbac.authorization.k8s.io/v1
  kind: ClusterRoleBinding
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-pvcunbinder
    namespace: basic-test
  roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: basic-test-pvcunbinder
  subjects:
  - kind: ServiceAccount
    name: basic-test
    namespace: basic-test
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-sts-lifecycle
    namespace: basic-test
  stringData:
    common.sh: |-
      #!/usr/bin/env bash

      # the SERVICE_NAME comes from the metadata.name of the pod, essentially the POD_NAME
      CURL_URL="https://${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local:9644"

      # commands used throughout
      CURL_NODE_ID_CMD="curl --silent --fail --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/node_config"

      CURL_MAINTENANCE_DELETE_CMD_PREFIX='curl -X DELETE --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_PUT_CMD_PREFIX='curl -X PUT --silent -o /dev/null -w "%{http_code}"'
      CURL_MAINTENANCE_GET_CMD="curl -X GET --silent --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/maintenance"
    postStart.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      postStartHook () {
        set -x

        touch /tmp/postStartHookStarted

        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Clearing maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_DELETE_CMD="${CURL_MAINTENANCE_DELETE_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        # a 400 here would mean not in maintenance mode
        until [ "${status:-}" = '"200"' ] || [ "${status:-}" = '"400"' ]; do
            status=$(${CURL_MAINTENANCE_DELETE_CMD})
            sleep 0.5
        done

        touch /tmp/postStartHookFinished
      }

      postStartHook
      true
    preStop.sh: |-
      #!/usr/bin/env bash
      # This code should be similar if not exactly the same as that found in the panda-operator, see
      # https://github.com/redpanda-data/redpanda/blob/e51d5b7f2ef76d5160ca01b8c7a8cf07593d29b6/src/go/k8s/pkg/resources/secret.go

      touch /tmp/preStopHookStarted

      # path below should match the path defined on the statefulset
      source /var/lifecycle/common.sh

      set -x

      preStopHook () {
        until NODE_ID=$(${CURL_NODE_ID_CMD} | grep -o '\"node_id\":[^,}]*' | grep -o '[^: ]*$'); do
            sleep 0.5
        done

        echo "Setting maintenance mode on node ${NODE_ID}"
        CURL_MAINTENANCE_PUT_CMD="${CURL_MAINTENANCE_PUT_CMD_PREFIX} --cacert /etc/tls/certs/default/ca.crt ${CURL_URL}/v1/brokers/${NODE_ID}/maintenance"
        until [ "${status:-}" = '"200"' ]; do
            status=$(${CURL_MAINTENANCE_PUT_CMD})
            sleep 0.5
        done

        until [ "${finished:-}" = "true" ] || [ "${draining:-}" = "false" ]; do
            res=$(${CURL_MAINTENANCE_GET_CMD})
            finished=$(echo $res | grep -o '\"finished\":[^,}]*' | grep -o '[^: ]*$')
            draining=$(echo $res | grep -o '\"draining\":[^,}]*' | grep -o '[^: ]*$')
            sleep 0.5
        done

        touch /tmp/preStopHookFinished
      }
      preStopHook
      true
  type: Opaque
- apiVersion: v1
  kind: Secret
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/component: redpanda
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: redpanda
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: redpanda-25.1.1-beta3
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-configurator
    namespace: basic-test
  stringData:
    configurator.sh: |-
      set -xe
      SERVICE_NAME=$1
      KUBERNETES_NODE_NAME=$2
      POD_ORDINAL=${SERVICE_NAME##*-}
      BROKER_INDEX=`expr $POD_ORDINAL + 1`

      CONFIG=/etc/redpanda/redpanda.yaml

      # Setup config files
      cp /tmp/base-config/redpanda.yaml "${CONFIG}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local.\",\"name\":\"internal\",\"port\":9093}"
      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[0] "$LISTENER"

      ADVERTISED_KAFKA_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      PREFIX_TEMPLATE=""
      ADVERTISED_KAFKA_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":31092}")

      rpk redpanda config --config "$CONFIG" set redpanda.advertised_kafka_api[1] "${ADVERTISED_KAFKA_ADDRESSES[$POD_ORDINAL]}"

      LISTENER="{\"address\":\"${SERVICE_NAME}.basic-test.basic-test.svc.cluster.local.\",\"name\":\"internal\",\"port\":8082}"
      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[0] "$LISTENER"

      ADVERTISED_HTTP_ADDRESSES=()

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      PREFIX_TEMPLATE=""
      ADVERTISED_HTTP_ADDRESSES+=("{\"address\":\"${SERVICE_NAME}\",\"name\":\"default\",\"port\":30082}")

      rpk redpanda config --config "$CONFIG" set pandaproxy.advertised_pandaproxy_api[1] "${ADVERTISED_HTTP_ADDRESSES[$POD_ORDINAL]}"
  type: Opaque
- apiVersion: v1
  data:
    config.yaml: |
      # from .Values.config
      kafka:
        brokers:
        - basic-test-0.basic-test.basic-test.svc.cluster.local.:9093
        - basic-test-1.basic-test.basic-test.svc.cluster.local.:9093
        - basic-test-2.basic-test.basic-test.svc.cluster.local.:9093
        sasl:
          enabled: false
        tls:
          caFilepath: /etc/tls/certs/default/ca.crt
          certFilepath: ""
          enabled: true
          insecureSkipTlsVerify: false
          keyFilepath: ""
      redpanda:
        adminApi:
          enabled: true
          tls:
            caFilepath: /etc/tls/certs/default/ca.crt
            certFilepath: ""
            enabled: true
            insecureSkipTlsVerify: false
            keyFilepath: ""
          urls:
          - https://basic-test.basic-test.svc.cluster.local.:9644
      schemaRegistry:
        enabled: true
        tls:
          caFilepath: /etc/tls/certs/default/ca.crt
          certFilepath: ""
          enabled: true
          insecureSkipTlsVerify: false
          keyFilepath: ""
        urls:
        - https://basic-test-0.basic-test.basic-test.svc.cluster.local.:8081
        - https://basic-test-1.basic-test.basic-test.svc.cluster.local.:8081
        - https://basic-test-2.basic-test.basic-test.svc.cluster.local.:8081
  kind: ConfigMap
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v3.1.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-3.1.0
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v3.1.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-3.1.0
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
  spec:
    replicas: 1
    selector:
      matchLabels:
        app.kubernetes.io/instance: basic-test
        app.kubernetes.io/name: console
    strategy: {}
    template:
      metadata:
        annotations:
          checksum-redpanda-chart/config: 95614d92e730a491d386446dfa4587e418cd315341dca7cd1982535470af7d44
          checksum/config: 3cfe51f0baef37d1fe24fbb98752c49da32c608bf8265bab411251ad63faa913
        creationTimestamp: null
        labels:
          app.kubernetes.io/instance: basic-test
          app.kubernetes.io/name: console
      spec:
        affinity: {}
        automountServiceAccountToken: false
        containers:
        - args:
          - --config.filepath=/etc/console/configs/config.yaml
          image: docker.redpanda.com/redpandadata/console:v3.1.0
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: console
          ports:
          - containerPort: 8080
            name: http
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /admin/health
              port: http
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          securityContext:
            runAsNonRoot: true
          volumeMounts:
          - mountPath: /etc/console/configs
            name: configs
            readOnly: true
          - mountPath: /etc/tls/certs/default
            name: redpanda-default-cert
        securityContext:
          fsGroup: 99
          fsGroupChangePolicy: Always
          runAsUser: 99
        serviceAccountName: basic-test-console
        volumes:
        - configMap:
            name: basic-test-console
          name: configs
        - name: redpanda-default-cert
          secret:
            defaultMode: 272
            secretName: basic-test-default-cert
  status: {}
- apiVersion: v1
  automountServiceAccountToken: false
  kind: ServiceAccount
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v3.1.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-3.1.0
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: console
      app.kubernetes.io/version: v3.1.0
      cluster.redpanda.com/namespace: basic-test
      cluster.redpanda.com/operator: v2
      cluster.redpanda.com/owner: basic-test
      helm.sh/chart: console-3.1.0
      helm.toolkit.fluxcd.io/name: basic-test
      helm.toolkit.fluxcd.io/namespace: basic-test
    name: basic-test-console
    namespace: basic-test
  spec:
    ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 0
    selector:
      app.kubernetes.io/instance: basic-test
      app.kubernetes.io/name: console
    type: ClusterIP
  status:
    loadBalancer: {}
