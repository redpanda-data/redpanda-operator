---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.3
  name: users.cluster.redpanda.com
spec:
  group: cluster.redpanda.com
  names:
    kind: User
    listKind: UserList
    plural: users
    shortNames:
      - rpu
    singular: user
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .status.conditions[?(@.type=="Synced")].status
          name: Synced
          type: string
        - jsonPath: .status.managedUser
          name: Managing User
          type: boolean
        - jsonPath: .status.managedAcls
          name: Managing ACLs
          type: boolean
      name: v1alpha2
      schema:
        openAPIV3Schema:
          properties:
            apiVersion:
              type: string
            kind:
              type: string
            metadata:
              type: object
            spec:
              properties:
                authentication:
                  properties:
                    password:
                      properties:
                        value:
                          type: string
                        valueFrom:
                          properties:
                            secretKeyRef:
                              properties:
                                key:
                                  type: string
                                name:
                                  default: ""
                                  type: string
                                optional:
                                  type: boolean
                              required:
                                - key
                              type: object
                              x-kubernetes-map-type: atomic
                          required:
                            - secretKeyRef
                          type: object
                      required:
                        - valueFrom
                      type: object
                      x-kubernetes-validations:
                        - message: valueFrom must not be empty if no value supplied
                          rule: self.value != "" || has(self.valueFrom)
                    type:
                      default: scram-sha-512
                      enum:
                        - scram-sha-256
                        - scram-sha-512
                        - SCRAM-SHA-256
                        - SCRAM-SHA-512
                      type: string
                  required:
                    - password
                  type: object
                authorization:
                  properties:
                    acls:
                      items:
                        properties:
                          host:
                            default: '*'
                            type: string
                          operations:
                            items:
                              type: string
                            maxItems: 11
                            minItems: 1
                            type: array
                          resource:
                            properties:
                              name:
                                type: string
                              patternType:
                                default: literal
                                enum:
                                  - literal
                                  - prefixed
                                type: string
                              type:
                                enum:
                                  - topic
                                  - group
                                  - cluster
                                  - transactionalId
                                type: string
                            required:
                              - name
                              - type
                            type: object
                            x-kubernetes-validations:
                              - message: prefixed pattern type only supported for ['group', 'topic', 'transactionalId']
                                rule: 'self.type in [''group'', ''topic'', ''transactionalId''] ? true : !has(self.patternType) || self.patternType != ''prefixed'''
                              - message: name must not be specified for type ['cluster']
                                rule: 'self.type == "cluster" ? (self.name == "") : true'
                              - message: acl rules on non-cluster resources must specify a name
                                rule: 'self.type == "cluster" ? true : (self.name != "")'
                          type:
                            enum:
                              - allow
                              - deny
                            type: string
                        required:
                          - operations
                          - resource
                          - type
                        type: object
                        x-kubernetes-validations:
                          - message: supported topic operations are ['Alter', 'AlterConfigs', 'Create', 'Delete', 'Describe', 'DescribeConfigs', 'Read', 'Write']
                            rule: 'self.resource.type == ''topic'' ? self.operations.all(o, o in [''Alter'', ''AlterConfigs'', ''Create'', ''Delete'', ''Describe'', ''DescribeConfigs'', ''Read'', ''Write'']) : true'
                          - message: supported group operations are ['Delete', 'Describe', 'Read']
                            rule: 'self.resource.type == ''group'' ? self.operations.all(o, o in [''Delete'', ''Describe'', ''Read'']) : true'
                          - message: supported transactionalId operations are ['Describe', 'Write']
                            rule: 'self.resource.type == ''transactionalId'' ? self.operations.all(o, o in [''Describe'', ''Write'']) : true'
                          - message: supported cluster operations are ['Alter', 'AlterConfigs', 'ClusterAction', 'Create', 'Describe', 'DescribeConfigs', 'IdempotentWrite']
                            rule: 'self.resource.type == ''cluster'' ? self.operations.all(o, o in [''Alter'', ''AlterConfigs'', ''ClusterAction'', ''Create'', ''Describe'', ''DescribeConfigs'', ''IdempotentWrite'']) : true'
                      maxItems: 1024
                      type: array
                    type:
                      default: simple
                      enum:
                        - simple
                      type: string
                  type: object
                cluster:
                  properties:
                    clusterRef:
                      properties:
                        name:
                          type: string
                      required:
                        - name
                      type: object
                    staticConfiguration:
                      properties:
                        admin:
                          properties:
                            sasl:
                              properties:
                                mechanism:
                                  type: string
                                passwordSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                token:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                username:
                                  type: string
                              required:
                                - mechanism
                              type: object
                            tls:
                              properties:
                                caCertSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                certSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                insecureSkipTlsVerify:
                                  type: boolean
                                keySecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                              type: object
                            urls:
                              items:
                                type: string
                              type: array
                          required:
                            - urls
                          type: object
                        kafka:
                          properties:
                            brokers:
                              items:
                                type: string
                              type: array
                            sasl:
                              properties:
                                awsMskIam:
                                  properties:
                                    accessKey:
                                      type: string
                                    secretKeySecretRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                        - name
                                      type: object
                                    sessionTokenSecretRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                        - name
                                      type: object
                                    userAgent:
                                      type: string
                                  required:
                                    - accessKey
                                    - secretKeySecretRef
                                    - sessionTokenSecretRef
                                    - userAgent
                                  type: object
                                gssapi:
                                  properties:
                                    authType:
                                      type: string
                                    enableFast:
                                      type: boolean
                                    kerberosConfigPath:
                                      type: string
                                    keyTabPath:
                                      type: string
                                    passwordSecretRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                        - name
                                      type: object
                                    realm:
                                      type: string
                                    serviceName:
                                      type: string
                                    username:
                                      type: string
                                  required:
                                    - authType
                                    - enableFast
                                    - kerberosConfigPath
                                    - keyTabPath
                                    - passwordSecretRef
                                    - realm
                                    - serviceName
                                    - username
                                  type: object
                                mechanism:
                                  type: string
                                oauth:
                                  properties:
                                    tokenSecretRef:
                                      properties:
                                        key:
                                          type: string
                                        name:
                                          type: string
                                      required:
                                        - name
                                      type: object
                                  required:
                                    - tokenSecretRef
                                  type: object
                                passwordSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                username:
                                  type: string
                              required:
                                - mechanism
                              type: object
                            tls:
                              properties:
                                caCertSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                certSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                insecureSkipTlsVerify:
                                  type: boolean
                                keySecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                              type: object
                          required:
                            - brokers
                          type: object
                        schemaRegistry:
                          properties:
                            sasl:
                              properties:
                                mechanism:
                                  type: string
                                passwordSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                token:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                username:
                                  type: string
                              required:
                                - mechanism
                              type: object
                            tls:
                              properties:
                                caCertSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                certSecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                                insecureSkipTlsVerify:
                                  type: boolean
                                keySecretRef:
                                  properties:
                                    key:
                                      type: string
                                    name:
                                      type: string
                                  required:
                                    - name
                                  type: object
                              type: object
                            urls:
                              items:
                                type: string
                              type: array
                          required:
                            - urls
                          type: object
                      type: object
                  type: object
                  x-kubernetes-validations:
                    - message: 'spec.cluster.staticConfiguration.admin: required value'
                      rule: '!has(self.staticConfiguration) || has(self.staticConfiguration.admin)'
                    - message: 'spec.cluster.staticConfiguration.kafka: required value'
                      rule: '!has(self.staticConfiguration) || has(self.staticConfiguration.kafka)'
                    - message: either clusterRef or staticConfiguration must be set
                      rule: has(self.clusterRef) || has(self.staticConfiguration)
                    - message: ClusterSource is immutable
                      rule: self == oldSelf
                template:
                  properties:
                    secret:
                      properties:
                        metadata:
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              type: object
                            labels:
                              additionalProperties:
                                type: string
                              type: object
                          type: object
                      required:
                        - metadata
                      type: object
                  type: object
              required:
                - cluster
              type: object
            status:
              default:
                conditions:
                  - lastTransitionTime: "1970-01-01T00:00:00Z"
                    message: Waiting for controller
                    reason: Pending
                    status: Unknown
                    type: Synced
              properties:
                conditions:
                  items:
                    properties:
                      lastTransitionTime:
                        format: date-time
                        type: string
                      message:
                        maxLength: 32768
                        type: string
                      observedGeneration:
                        format: int64
                        minimum: 0
                        type: integer
                      reason:
                        maxLength: 1024
                        minLength: 1
                        pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                        type: string
                      status:
                        enum:
                          - "True"
                          - "False"
                          - Unknown
                        type: string
                      type:
                        maxLength: 316
                        pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                        type: string
                    required:
                      - lastTransitionTime
                      - message
                      - reason
                      - status
                      - type
                    type: object
                  type: array
                managedAcls:
                  type: boolean
                managedUser:
                  type: boolean
                observedGeneration:
                  format: int64
                  type: integer
              type: object
          required:
            - spec
          type: object
      served: true
      storage: true
      subresources:
        status: {}
